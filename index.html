<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Experiment 2</title>
    <script src="https://unpkg.com/jsplumb/dist/js/jsplumb.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="styles2.css">
</head>

<body>
  <main class="panel" >

    <section class="top-row">
      <aside class="left-column">
        <div class="mcb-starter-section">
          <div class="mcb-block">
            <img class="mcb-toggle" src="images/mcb-off.png" alt="MCB">
            <h3 class="mcb-label">MCB</h3>
            <div>
              
                <button class="point-R">R</button>
                <div id="pointR" class="point"></div>
              
             <button class="point-B">B</button>
             
             <div id="pointB" class="point"></div>
            </div>
          </div>
          <div class="starter-block">
            <h3 class="starter-label">Starter</h3>
            <img class="starter-body" src="images/starter.png" alt="Starter body">
            <img class="starter-handle" src="images/starter-handle.png" alt="Starter handle">
            <div>
              <button class="point-L">L</button>
             <button class="point-F">F</button>
             <button class="point-A">A</button>
             <div id="pointL" class="point"></div>
             <div id="pointF" class="point"></div>
             <div id="pointA" class="point"></div>
            </div>
          </div>
        </div>

        <div class="lampboard-dropdown">
           <select name="number" id="number">
             <option value="">Select number of bulbs</option>
             <option value="1">1</option>
             <option value="2">2</option>
             <option value="3">3</option>
             <option value="4">4</option>
             <option value="5">5</option>
             <option value="6">6</option>
             <option value="7">7</option>
             <option value="8">8</option>
             <option value="9">9</option>
             <option value="10">10</option>
           </select>
        </div>
        <div class="lamp-board">
          
          <div class="lamp-grid">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
            <img class="lamp-bulb off" src="images/off-bulb.png" alt="Lamp off">
          </div>
          <h3 class="lamp-load-label">Lamp Load</h3>
           <div>
            <button class="point-L1">L1</button>
            <div id="pointL1" class="point"></div>   
            </div>
            <div>
              <button class="point-L2">L2</button>     
              <div id="pointL2" class="point"></div>  
            </div>
        </div>
      </aside>

      <section class="center-column">

        <!-- METER + SLOTS WRAPPER (this fixes drifting) -->
        <div class="meter-area">
 
          <div class="meter-panel">
            <div class="meters">
              <h3 id="ammter1-label">Ammeter-1</h3>
               <h3 id="voltmeter1-label">Voltmeter-1</h3>
              <h3 id="ammter2-label">Ammeter-2</h3>
              <h3 id="voltmeter2-label">Voltmeter-2</h3>

              <div class="meter-card">
                <img class="ammeter-img" src="images/ammeter.png" alt="Ammeter">
                <div class="meter-needle1">
                  <img src="images/needle.png" alt="needle">
                </div>
                <div id="liveA1" class="meter-reading" aria-live="polite">--</div>
                <div>
                    <button class="point-C">C</button>
                   <button class="point-D">D</button>
                     
                    <div id="pointC" class="point"></div>
                   <div id="pointD" class="point"></div>
                   
                </div>
              </div>

              <div class="meter-card">
                 <img src="images/voltmeter.png" alt="Voltmeter">
                <div class="meter-needle3">
                  <img src="images/needle.png" alt="needle">
                </div>
                <div id="liveV1" class="meter-reading" aria-live="polite">--</div>
                
                <div>
                   <button class="point-E">E</button>
                   <button class="point-G">G</button>
                     
                   <div id="pointE" class="point"></div>
                   <div id="pointG" class="point"></div>
                   
                </div>
              </div>

              <div class="meter-card">
                <img src="images/ammeter.png" alt="Ammeter">
                <div class="meter-needle2">
                  <img src="images/needle.png" alt="needle">
                </div>
                <div id="liveA2" class="meter-reading" aria-live="polite">--</div>
                 <div>
                    <button class="point-H">H</button>
                    <button class="point-I">I</button>
                     
                   <div id="pointH" class="point"></div>
                   <div id="pointI" class="point"></div>
                   
                </div>
              </div>

              <div class="meter-card">
                <img src="images/voltmeter.png" alt="Voltmeter">
                <div class="meter-needle4">
                  <img src="images/needle.png" alt="needle">
                </div>
                <div id="liveV2" class="meter-reading" aria-live="polite">--</div>
                 <div>
                    <button class="point-J">J</button>
                    <button class="point-K">K</button>
                     
                   <div id="pointJ" class="point"></div>
                   <div id="pointK" class="point"></div>
                   
                </div>
              </div>
            </div>
          </div>
        </div>
         
        <div class="workspace">
          
          <div class="equipment-row">
            
            <div class="assembly">
             
              <div class="motor-box">
                <img src="images/shuntmotor.png" alt="Motor">
                <h3 class="dc-motor-label">
                  DC Shunt Motor
                </h3>
                <div>
                  <button class="point-A1">A1</button>
                  <button class="point-Z1">Z1</button>
                        
                  <div id="pointA1" class="point"></div>
                  <div id="pointZ1" class="point"></div>
                   
                </div>
                <div>
                  <button class="point-A2">A2</button>
                  <button class="point-Z2">Z2</button>
                        
                  <div id="pointA2" class="point"></div>
                  <div id="pointZ2" class="point"></div>
                   
                </div>
              </div>

              <div class="coupler">
                <img src="images/shaft.png" alt="Coupling shaft">
              </div>

              <div class="generator-box">
                <img class="generator-body" src="images/Rotor-body.png" alt="Rotor body">
                <img class="generator-rotor" id="gr" src="images/Generator-Rotor.png" alt="Generator rotor">               
                <h3 class="dc-generator-label">
                  DC Shunt Generator
                </h3>
                  <div>
                     <button class="point-A3">A3</button>
                     <button class="point-Z3">Z3</button>
                           
                     <div id="pointA3" class="point"></div>
                     <div id="pointZ3" class="point"></div>
                   
                </div>
                  <div>
                     <button class="point-A4">A4</button>
                     <button class="point-Z4">Z4</button>
                           
                     <div id="pointA4" class="point"></div>
                     <div id="pointZ4" class="point"></div>
                   
                </div>
              </div>
           </div>
         </div>
        </div>

        <section class="observation-section observation-floating">
          <div class="observation-header">
            <div>
              <h3>Observation Table</h3>
            </div>
          </div>
          <div class="observation-table-wrapper">
            <table id="observationTable">
              <thead>
                <tr>
                  <th>S. No.</th>
                  <th>Current (A)</th>
                  <th>Voltage (V)</th>
                </tr>
              </thead>
              <tbody id="observationBody">
                <tr class="placeholder-row">
                  <td colspan="3">No readings added yet.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

      </section>
      <div id="pill-stack">
         <div class="instructions-wrapper">
           <button class="pill-btn instructions-btn" type="button">Instructions</button>
            <div class="instructions-panel" role="note" aria-label="Experiment instructions preview">
             <h4>STEP 1: Make connections as per instructions below:</h4>
             <table class="conn-table">
               <tr>
                 <th>From</th>
                 <td>R</td><td>R</td><td>B</td><td>B</td><td>A2</td><td>L</td><td>F</td><td>A</td><td>L2</td><td>A4</td><td>Z4</td><td>I</td><td>J</td><td>H</td><td>H</td>
               </tr>
               <tr>
                 <th>To</th>
                 <td>C</td><td>E</td><td>G</td><td>A2</td><td>Z2</td><td>D</td><td>Z1</td><td>A1</td><td>A4</td><td>Z4</td><td>K</td><td>J</td><td>L1</td><td>A3</td><td>Z3</td>
               </tr>
             </table>
 
             <p><strong>STEP 2:</strong> Click on <b>"Check"</b> Button for checking the connections.</p>
             <p><strong>STEP 3:</strong> If connections are correct, MCB will be turned ON.</p>
             <p><strong>STEP 4:</strong> Select the number of Bulbs from the Lamp load.</p>
             <p><strong>STEP 5:</strong> Click on <b>"Add To Table"</b> Button to add the values to the Observation Table.</p>
             <p><strong>STEP 6:</strong> Add different values to the Table by increasing the lamp load.</p>
             <p><strong>STEP 7:</strong> Click on <b>"Graph"</b> Button to create the graph.</p>
             <p><strong>STEP 8:</strong> Click on <b>"Print"</b> Button to print the webpage.</p>
             <p><strong>STEP 9:</strong> Click on <b>"Reset"</b> Button to reset the webpage.</p>
           </div>
         </div>
          <button class="pill-btn" type="button">Start Speaking</button>
           <button class="pill-btn" type="button">Check</button>
           
            <button class="pill-btn" type="button">Auto Connect</button>
            <button class="pill-btn" type="button">Add To Table</button>
            <button class="pill-btn" type="button">Reset</button>
        </div>
     </section>

  
    <div id="instructionModal" class="instruction-overlay is-hidden" role="dialog" aria-modal="true" aria-label="Experiment instructions">
      <div class="instruction-overlay__backdrop"></div>
      <div class="instruction-dialog animate-fadeInUp">
        <button type="button" class="instruction-close" aria-label="Close instructions">&times;</button>
        <section class="vl-card p-6 instruction-body">
          <div class="space-y-8 text-gray-700 text-lg leading-relaxed">
            <div class="overflow-auto rounded-lg shadow border border-gray-200 instruction-table-wrapper">
              <table class="min-w-[1100px] w-full table-fixed divide-y divide-gray-200">
                <caption class="sr-only">Connections mapping between 'From' and 'To' terminals</caption>
                <thead class="bg-gray-50">
                  <tr>
                    <th class="sticky top-0 z-10 px-4 py-3 text-left text-sm font-semibold text-gray-700 bg-gray-50">From</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">R</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">R</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">B</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">B</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">A2</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">L</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">F</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">A</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">L2</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">A4</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">Z4</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">I</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">J</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">H</th>
                    <th class="sticky top-0 z-10 px-3 py-3 text-center text-xs font-medium text-gray-600 uppercase">H</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100 text-sm">
                  <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 font-medium text-gray-800 bg-gray-50">To</td>
                    <td class="px-3 py-3 text-center">C</td>
                    <td class="px-3 py-3 text-center">E</td>
                    <td class="px-3 py-3 text-center">G</td>
                    <td class="px-3 py-3 text-center">A2</td>
                    <td class="px-3 py-3 text-center">Z2</td>
                    <td class="px-3 py-3 text-center">D</td>
                    <td class="px-3 py-3 text-center">Z1</td>
                    <td class="px-3 py-3 text-center">A1</td>
                    <td class="px-3 py-3 text-center">A4</td>
                    <td class="px-3 py-3 text-center">Z4</td>
                    <td class="px-3 py-3 text-center">K</td>
                    <td class="px-3 py-3 text-center">J</td>
                    <td class="px-3 py-3 text-center">L1</td>
                    <td class="px-3 py-3 text-center">A3</td>
                    <td class="px-3 py-3 text-center">Z3</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="mt-3 text-xs text-gray-600 instruction-legend">
              <span class="inline-block mr-4"><span class="inline-block w-3 h-3 bg-gray-100 mr-1 align-middle rounded-sm"></span>Terminals legend</span>
              <span class="inline-block mr-4">&bull; <strong>From</strong> = source terminal</span>
              <span class="inline-block">&bull; <strong>To</strong> = destination terminal</span>
            </div>

            <div class="flex justify-center my-8">
              <img src="images/CorrectConnections.png" alt="Correct Connections Diagram" class="max-w-full h-auto rounded-lg shadow-lg instruction-image" style="max-height: 500px;">
            </div>

            <div class="space-y-4 instruction-steplist">
              <p><strong>STEP 2:</strong> Click on <b>"Check"</b> Button for checking the connections.</p>
              <p><strong>STEP 3:</strong> If connections are correct, MCB will be turned ON.</p>
              <p><strong>STEP 4:</strong> Select the number of Bulbs from the Lamp load.</p>
              <p><strong>STEP 5:</strong> Click on <b>"Add To Table"</b> Button to add the values to the Observation Table.</p>
              <p><strong>STEP 6:</strong> Add different values to the Table by increasing the lamp load.</p>
              <p><strong>STEP 7:</strong> Click on <b>"Graph"</b> Button to create the graph.</p>
              <p><strong>STEP 8:</strong> Click on <b>"Print"</b> Button to print the webpage.</p>
              <p><strong>STEP 9:</strong> Click on <b>"Reset"</b> Button to reset the webpage.</p>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>  

  <footer class="panel-footer">
    <section class="graph-section">
      <div class="graph-header">
        <div class="graph-title">
          <h3>Output Graph</h3>
        </div>
        <div class="graph-actions">
          <button class="graph-pill-btn" type="button">Graph</button>
          <button class="graph-pill-btn" type="button">Report</button>
          <button class="graph-pill-btn" type="button">Print</button>
        </div>
      </div>
      <div class="graph-canvas">
        <div class="graph-bars" id="graphBars"></div>
        <div id="graphPlot" class="graph-plot" aria-label="Voltage vs Current graph"></div>
      </div>
    </section>
  </footer>

  <div class="chatbot-widget">
    <div class="chatbot-panel" data-chat-url="https://vlab-chatbot-exp2.vercel.app/">
      <div class="chatbot-panel-header">
        <div>
          <p class="chatbot-panel-title">Virtual Lab Assistant</p>
          <p class="chatbot-panel-caption">Ask anything about this experiment</p>
        </div>
        <button type="button" class="chatbot-panel-close" aria-label="Close chatbot">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="chatbot-panel-body">
        <div class="chatbot-panel-placeholder">Loading area for your chatbot. Update the <strong>data-chat-url</strong> to match your deployment.</div>
        <iframe title="Chatbot assistant" referrerpolicy="no-referrer" scrolling="no"></iframe>
      </div>
    </div>

    <button type="button" class="chatbot-launcher" aria-expanded="false" aria-label="Open chatbot assistant">
      <span class="chatbot-hint-bubble">
        <span class="chatbot-hint-dot">Hi</span>
        Ask anything about this experiment
      </span>
      <img src="images/chatbot.png" alt="" aria-hidden="true" class="chatbot-launcher-image">
    </button>
  </div>

  <audio id="chatbot-notification-audio" preload="auto">
    <source src="live-chat-353605.mp3" type="audio/mpeg">
  </audio>
</body>

<script src="script.js"></script>
</html>
